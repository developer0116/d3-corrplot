/*! lib-tmpl - v0.2.1 - 2015-02-09 - Jeremy Kahn */
(function(){function t(t){"use strict";var r=t.Corrplot=function(t){return t=t||{},this._readOnlyVar="read only",this.readAndWrite="read and write",this};r.prototype.getReadOnlyVar=function(){return this._readOnlyVar},r.prototype.chainableMethod=function(){return this}}function r(t){"use strict";var r=t.Corrplot;r.CorrplotHelper=function(){return this},r.prototype.alternateGetReadOnlyVar=function(){return this._readOnlyVar},d3.chart("corrplot",{initialize:function(){function t(t){var n=d3.select(this).selectAll(".cell").data(t);n.enter().append("rect").attr("class","cell").on("mouseover",r._mouseover).on("mouseout",r._mouseout),n.exit().remove(),n.attr("x",function(t){return r.x(t.x)}).style("fill",r.c).attr("width",r.x.rangeBand()).attr("height",r.x.rangeBand())}var r=this;this._loadDefaults(r);var n=this.base.attr("height",this.w+this.margin.top+this.margin.bottom).attr("width",this.w+this.margin.left+this.margin.right).style("margin-left",-this.margin.left+"px").append("g").classed("corrplot",!0).attr("transform","translate ("+this.margin.left+","+this.margin.top+")");this.layer("rows",n,{dataBind:function(t){var r=this.chart(),n=t.matrix,e=t.order;return void 0===e&&(e=d3.range(t.nodes.length)),r.x.domain(e),n=n.map(function(t,r){return t.map(function(t,n){return{x:n,y:r,z:t}})}),this.selectAll(".row").data(n)},insert:function(){return this.chart(),this.append("g").classed("row",!0)},events:{merge:function(){var r=this.chart();return this.attr("transform",function(t,n){return"translate(0,"+r.x(n)+")"}).each(t)},exit:function(){this.remove()}}}),this.layer("rows-header",n.append("g"),{dataBind:function(t){var r=(this.chart(),t.nodes);return r.forEach(function(t,r){t.index=r}),this.selectAll(".row-header").data(r)},insert:function(){return this.chart(),this.append("text").classed("row-header",!0)},events:{merge:function(){var t=this.chart();return this.attr("transform",function(r,n){return"translate(0,"+t.x(n)+")"}).attr("x",-6).attr("y",t.x.rangeBand()/2).attr("dy",".32em").attr("text-anchor","end").text(function(t){return t.name})},exit:function(){this.remove()}}}),this.layer("cols-header",n.append("g"),{dataBind:function(t){var r=(this.chart(),t.nodes);return this.selectAll(".col-header").data(r)},insert:function(){return this.chart(),this.append("text").classed("col-header",!0)},events:{merge:function(){var t=this.chart();return this.attr("transform",function(r,n){return"translate("+t.x(n)+")rotate("+t.colRotation+")"}).attr("x",6).attr("y",t.x.rangeBand()/2).attr("dy",".32em").attr("text-anchor","start").text(function(t){return t.name})},exit:function(){this.remove()}}})},_loadDefaults:function(){this.x=d3.scale.ordinal(),this.width(720);var t=d3.scale.linear().domain([-1,0,1]).range(["#ef8a62","#f7f7f7","#67a9cf"]);this.color(function(r){return t(r.z)}),this.duration(0),this.margin({top:80,right:0,bottom:10,left:80}),this.rotatecols(-90),this.mouseover(function(){}),this.mouseout(function(){})},width:function(t){return 0===arguments.length?this.w:(this.w=t,this.x=this.x.rangeBands([0,t]),this.reDraw(),this)},margin:function(t){return 0===arguments.length?this.margin:(this.margin=t,this)},rotatecols:function(t){return 0===arguments.length?this.colRotation:(this.colRotation=t,this)},color:function(t){return 0===arguments.length?this.c:(this.c=t,this)},duration:function(t){return 0==arguments.length?this.d:(this.d=t,this)},mouseover:function(t){return 0==arguments.length?this._mouseover:(this._mouseover=t,this)},mouseout:function(t){return 0==arguments.length?this._mouseout:(this._mouseout=t,this)},order:function(t){if(0==arguments.length)return this.x.domain();if(0==this.x.domain().length)this.x.domain(t);else{this.x.domain(t);var r=this.x,n=this.w,e=this.d,i=this.colRotation,a=this.base.transition().duration(e);a.selectAll(".row").delay(function(t,i){return r(i)/n*e}).attr("transform",function(t,n){return"translate(0,"+r(n)+")"}).selectAll(".cell").delay(function(t){return r(t.x)/n*e}).attr("x",function(t){return r(t.x)}),a.selectAll(".row-header").delay(function(t,i){return r(i)/n*e}).attr("transform",function(t,n){return"translate(0,"+r(n)+")"}),a.selectAll(".col-header").delay(function(t,i){return r(i)/n*e}).attr("transform",function(t,n){return"translate("+r(n)+")rotate("+i+")"})}return this},drawAndSave:function(t){return this._data=t,this.draw(t),this},reDraw:function(){return this._data?(this.base.attr("height",this.w+this.margin.top+this.margin.bottom).attr("width",this.w+this.margin.left+this.margin.right),this.draw(this._data)):this}})}function n(t){"use strict";var r=t.Corrplot;r.CorrplotHelper=function(){return this},r.prototype.alternateGetReadOnlyVar=function(){return this._readOnlyVar}}function e(t){"use strict";var r=t.Corrplot,n=r.Order=function(){var t="Constructor Variable";this.instanceVariable=null,this._privateMethod(t)};n.prototype.publicMethod=function(t){return void 0!==t&&this._privateMethod(t),this.instanceVariable},n.prototype.Original=function(t){return Array.isArray(t)&&(t=t.length),"object"==typeof t&&(t=t.nodes.length),d3.range(t)},n.prototype.Alphabetical=function(t,r){return 1==arguments.length&&(r=function(t){return t}),d3.range(t.length).sort(function(n,e){return d3.ascending(r(t[n]),r(t[e]))})},n.prototype.AOE=function(t){Array.isArray(t)||(t=t.matrix);var r=numeric.eig(t).E.x,n=d3.range(t.length).map(function(t){var n=r[t][0],e=r[t][1];return Math.atan(e/n)+(n>0?0:Math.PI)});return d3.range(t.length).sort(function(t,r){return n[t]-n[r]})},n.prototype.FPC=function(t){Array.isArray(t)||(t=t.matrix);var r=numeric.eig(t).E.x,n=r.map(function(t){return t[0]});return d3.range(t.length).sort(function(t,r){return n[r]-n[t]})},n.prototype._privateMethod=function(t){return this.instanceVariable=t}}function i(t){"use strict";var r=t.Corrplot,n=r.Submodule=function(){var t="Constructor Variable";this.instanceVariable=null,this._privateMethod(t)};n.prototype.publicMethod=function(t){return void 0!==t&&this._privateMethod(t),this.instanceVariable},n.prototype._privateMethod=function(t){return this.instanceVariable=t}}var a=Function,o=(new a("return this")(),function(a){return t(a),r(a),n(a),i(a),e(a),a.Corrplot});"function"==typeof define&&define.amd?define(function(){return o({})}):o(this)})(this);